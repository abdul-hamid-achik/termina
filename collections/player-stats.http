@baseUrl = http://localhost:3000

### Setup: register a user for stats tests
# @name setupStatsUser
POST {{baseUrl}}/api/auth/register
Content-Type: application/json

{
  "username": "stat_{{$random(10000, 99999)}}",
  "password": "TestPass123!"
}

>>>
expect status 200
<<<

>>>capture
statsCookie from header Set-Cookie
<<<

### Get player stats (authenticated)
# @name getStats
# @depends setupStatsUser
GET {{baseUrl}}/api/player/stats
Cookie: {{statsCookie}}

>>>
expect status 200
expect body.player exists
expect body.player.mmr exists
expect body.player.gamesPlayed exists
expect body.player.wins exists
expect body.player.losses exists
expect body.player.winRate exists
expect body.heroStats exists
expect body.recentMatches exists
<<<

### Stats: fresh player has 0 games
# @name statsNoGames
# @depends setupStatsUser
GET {{baseUrl}}/api/player/stats
Cookie: {{statsCookie}}

>>>
expect status 200
expect body.player.gamesPlayed == 0
expect body.player.wins == 0
expect body.player.losses == 0
<<<
